<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Órdenes - Servicios Mecánicos RCV</title>

  <link rel="stylesheet" href="css/estilos.css" />
  <script>(function(){try{if(!localStorage.getItem('API_BASE'))localStorage.setItem('API_BASE','http://localhost:3001/api');}catch(e){}})();</script>

  <script src="js/common.js" defer></script>
  <script src="js/global.js" defer></script>
  <script src="js/panel-links.js" defer></script>
  <script src="js/topbar.js" defer></script>
  <script src="js/toast.js" defer></script>
  <script src="js/perms.js" defer></script>
  <script src="js/logout.js" defer></script>

  <script src="js/ordenes-listado.js" defer></script>
</head>
<body data-page-key="ordenes">
  <div id="topbarContainer"></div>

  <main class="container container--fluid">
">
    <h1>Órdenes</h1>

    <section class="card">
      <div class="card-header">
        <h2>Listado</h2>
        <div class="toolbar">
          <span id="countOrdenes" class="muted">Órdenes (0)</span>
          <input id="q" placeholder="Buscar por número, placa, cliente, estado…" />
          <button id="btnBuscar" class="btn-ghost" type="button">Buscar</button>
          <button id="btnRefrescar" class="btn-ghost" type="button">Refrescar</button>
          <button id="btnExportCsv" class="btn-ghost" type="button">Exportar CSV</button>
          <a href="crear-orden.html" class="btn-primary">+ Nueva orden</a>
        </div>
      </div>

      <div class="table-scroll">
        <table class="tabla" id="tablaOrdenes">
          <thead>
            <tr>
              <th>#</th>
              <th>Número</th>
              <th>Fecha</th>
              <th>Estado</th>
              <th>Placa</th>
              <th>Cliente</th>
              <th>Asignado</th>
              <th style="width:120px">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr class="skel-row"><td colspan="8">Cargando…</td></tr>
          </tbody>
        </table>
      </div>

      <div id="paginador-ordenes" class="paginator"></div>
    </section>
  </main>

  <!-- Dialog ver orden -->
  <dialog id="dlgOrden" style="width:min(860px,96vw);border:none;border-radius:12px;padding:0;box-shadow:var(--shadow)">
    <div class="card" style="margin:0;border:none;box-shadow:none">
      <div class="card-header">
        <h2 id="dlgOrdenTitulo" style="margin:0">Orden</h2>
        <div class="toolbar">
          <button id="btnDlgPrint" class="btn-ghost" type="button">Imprimir</button>
          <button id="btnDlgPdf" class="btn-ghost" type="button">Guardar PDF</button>
          <button id="btnCerrarDlgOrden" class="btn-ghost" type="button">Cerrar</button>
        </div>
      </div>
      <div id="dlgOrdenBody" style="max-height:65vh;overflow:auto;padding:8px 12px 16px 12px"></div>
    </div>
  </dialog>

  <div class="toast-container" aria-live="polite" aria-atomic="true"></div>
  <script src="js/theme.js"></script>
</body>
</html>
